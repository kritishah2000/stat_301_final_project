---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

```{r}
#loading packages
library(tidyverse)
library(skimr)
library(tidymodels)
library(janitor)
library(vcd)
library(corrplot)
library(corrr)

#loading data
patients_data <- read_csv("data/unprocessed/train_data.csv") %>% 
  clean_names()
```


##Initial overview of data
Our data was taken from a Kaggle dataset called [AV: Healthcare Analytics II](https://www.kaggle.com/nehaprabhavalkar/av-healthcare-analytics-ii) published by Neha Prabhavlakar in 2020. The data was compiled by Analytics Vidhya for a Kaggle competition exploring the theme of healthcare analytics and the application of machine learning on healthcare case studies. 

In general, the dataset contains information on various factors that may influence the length of stay for a patient during the COVID-19 pandemic. Ultimately, using these variables, we were intending to train models to predict the length of stay by relating to the response variable (`stay` -- number of stay days by the patient) with the following 13 predictor variables:
* `hospital_code`: unique code for hospital
* `hospital_type_code`: unique code for type of hospital
* `hospital_region_code`: region code of hospital
* `available_extra_rooms_in_hospital`: number of extra rooms available in the hospital
* `department`: department overlooking the case
* `ward_type`: code for the ward type
* `ward_facility_code`: code for the ward facility
* `bed_grade`: condition of bed in the ward
* `visitors_with_patient`: number of visitors with patient
* `age`: age of the patient
* `severity_of_illness`: severity of illness recorded at the time of admission
* `type_of_admission`: admission type registered by the hospital
* `admission_deposit`: deposit at the admission time

```{r}
skim_without_charts(patients_data)
```

In total, there are 318438 rows of data. Upon skimming the data, we can see that there are only two variables with missing data: `bed_grade` and `city_code_patient`. Because `city_code_patient` is a unique identifier for each patient that would not reveal interesting relationships, we decided to exclude this variable from our analysis. However, we decided to keep `bed_grade`, so we planned to filter for  rows of data that were not missing `bed_grade` (excluding the 113 values of missing data).

Lastly, for our models, we also decided to exclude `case_id` and `patientid` because these were unique identifiers for each patient that would not show important relationships in the data.

###Thorough univariate investigation of response variable(s)

```{r}
ggplot(patients_data) +
  geom_bar(mapping = aes(stay))
```

###Thorough univariate investigation of important predictor variable(s) - ones either believed to be important (domain knowledge) or hypothesized to be important. 

```{r}
ggplot(patients_data) +
  geom_histogram(mapping = aes(hospital_code))

ggplot(patients_data) +
  geom_bar(mapping = aes(hospital_type_code))

ggplot(patients_data) +
  geom_bar(mapping = aes(hospital_region_code))

ggplot(patients_data) +
  geom_bar(mapping = aes(available_extra_rooms_in_hospital))

ggplot(patients_data) +
  geom_bar(mapping = aes(department))

ggplot(patients_data) +
  geom_bar(mapping = aes(ward_type))

ggplot(patients_data) +
  geom_bar(mapping = aes(bed_grade))

ggplot(patients_data) +
  geom_bar(mapping = aes(severity_of_illness))

ggplot(patients_data) +
  geom_bar(mapping = aes(visitors_with_patient))

ggplot(patients_data) +
  geom_bar(mapping = aes(age))

ggplot(patients_data) +
  geom_bar(mapping = aes(severity_of_illness))

ggplot(patients_data) +
  geom_bar(mapping = aes(type_of_admission))
```


##Essential Findings (Important or Interesting)



##Secondary Findings



